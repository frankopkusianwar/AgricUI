!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/router"),require("rxjs/operators"),require("@angular/core")):"function"==typeof define&&define.amd?define("ngx-gtag",["exports","@angular/common","@angular/router","rxjs/operators","@angular/core"],t):t(e["ngx-gtag"]={},e.ng.common,e.ng.router,e.rxjs.operators,e.ng.core)}(this,function(e,o,i,a,r){"use strict";var t=function(){function e(e){this.platform=e}return e.prototype.event=function(e){if(o.isPlatformBrowser(this.platform))try{gtag("event",e.action,e.options)}catch(t){console.error("Error occured with google analytics event",t)}},e.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:Object,decorators:[{type:r.Inject,args:[r.PLATFORM_ID]}]}]},e.ngInjectableDef=r.defineInjectable({factory:function(){return new e(r.inject(r.PLATFORM_ID))},token:e,providedIn:"root"}),e}(),n=new r.InjectionToken("NGX_GTAG_CONFIG"),c=function(){function e(e,t,r,n){this.router=e,this.config=t,this.document=r,this.platform=n}return e.prototype.startTracking=function(){var r=this;if(o.isPlatformBrowser(this.platform)){if(Array.isArray(this.config))this.config.forEach(function(e){e.options={};var t=r.renderer.createElement("script");t.src="https://www.googletagmanager.com/gtag/js?id='"+e.trackingId+"'",r.renderer.appendChild(r.document.head,t)});else if(this.config.options===undefined){this.config.options={};var e=this.renderer.createElement("script");e.src="https://www.googletagmanager.com/gtag/js?id='"+this.config.trackingId+"'",this.renderer.appendChild(this.document.head,e)}var t=this.renderer.createElement("script"),n=this.renderer.createText("window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());");this.renderer.appendChild(t,n),this.renderer.appendChild(this.document.head,t),this.router.events.pipe(a.filter(function(e){return e instanceof i.NavigationEnd})).subscribe(function(t){Array.isArray(r.config)?r.config.forEach(function(e){e.options.page_path=t.urlAfterRedirects,gtag("config",e.trackingId,e.options)}):(r.config.options.page_path=t.urlAfterRedirects,gtag("config",r.config.trackingId,r.config.options))})}},e.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:i.Router},{type:undefined,decorators:[{type:r.Inject,args:[n]}]},{type:undefined,decorators:[{type:r.Inject,args:[o.DOCUMENT]}]},{type:Object,decorators:[{type:r.Inject,args:[r.PLATFORM_ID]}]}]},e.ngInjectableDef=r.defineInjectable({factory:function(){return new e(r.inject(i.Router),r.inject(n),r.inject(o.DOCUMENT),r.inject(r.PLATFORM_ID))},token:e,providedIn:"root"}),e}(),s=function(){function e(e,t){this.service=e,this.renderer=t,this.service.renderer=this.renderer}return e.prototype.ngOnInit=function(){this.service.startTracking()},e.decorators=[{type:r.Component,args:[{selector:"ngx-gtag",template:""}]}],e.ctorParameters=function(){return[{type:c},{type:r.Renderer2}]},e}(),g=function(){return(g=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},p=function(){function e(e,t,r){this.ngxGtagEventService=e,this.renderer=t,this.el=r}return e.prototype.ngAfterViewInit=function(){var e=this;try{this.renderer.listen(this.el.nativeElement,this.gtagOn,function(){e.ngxGtagEventService.event({action:e.gtagAction||e.gtagOn,options:g({},e.gtagOptions)})})}catch(t){console.error(t)}},e.decorators=[{type:r.Directive,args:[{selector:"[ngxGtagEvent]"}]}],e.ctorParameters=function(){return[{type:t},{type:r.Renderer2},{type:r.ElementRef}]},e.propDecorators={gtagOn:[{type:r.Input}],gtagTrackingId:[{type:r.Input}],gtagAction:[{type:r.Input}],gtagOptions:[{type:r.Input}]},e}(),u=function(){function t(e){if(e)throw new Error("ngx-gtag should only be loaded in one module, preferably your root or core module.")}return t.forRoot=function(e){return{ngModule:t,providers:[{provide:n,useValue:e}]}},t.decorators=[{type:r.NgModule,args:[{declarations:[s,p],exports:[s,p]}]}],t.ctorParameters=function(){return[{type:t,decorators:[{type:r.Optional},{type:r.SkipSelf}]}]},t}();e.NgxGtagEventService=t,e.NgxGtagModule=u,e.ɵd=p,e.ɵc=n,e.ɵa=s,e.ɵb=c,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-gtag.umd.min.js.map